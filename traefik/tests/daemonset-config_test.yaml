suite: DaemonSet configuration
templates:
  - daemonset.yaml
tests:
  - it: should be of type DaemonSet
    set:
      kind: DaemonSet
    asserts:
    - isKind:
        of: DaemonSet
  - it: should have a rollingUpdate strategy with default values
    set:
      kind: DaemonSet
    asserts:
      - equal:
          path: spec.updateStrategy.type
          value: RollingUpdate
      - equal:
          path: spec.updateStrategy.rollingUpdate.maxUnavailable
          value: 1
      - equal:
          path: spec.updateStrategy.rollingUpdate.minReadySeconds
          value: 30
  - it: should have a custom merged rollingUpdate strategy with specified values
    set:
      kind: DaemonSet
      daemonset:
        rollingUpdate:
          maxUnavailable: 3
          minReadySeconds: 60
          vegetaForce: 9000
    asserts:
      - equal:
          path: spec.updateStrategy.type
          value: RollingUpdate
      - equal:
          path: spec.updateStrategy.rollingUpdate.maxUnavailable
          value: 3
      - equal:
          path: spec.updateStrategy.rollingUpdate.minReadySeconds
          value: 60
      - equal:
          path: spec.updateStrategy.rollingUpdate.vegetaForce
          value: 9000
